(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{"/94A":function(e){e.exports=JSON.parse('{"root":["index","setup"],"References":{"Community articles":"/community/articles","API documentation":"https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/index.html","Release notes":"/release-notes"},"Server":["server-basics","server-decorator","server-grpc","server-thrift","server-docservice","server-annotated-service","server-http-file","server-servlet","server-access-log","server-cors","server-sse"],"Client":["client-http","client-thrift","client-grpc","client-decorator","client-retrofit","client-custom-http-headers","client-timeouts","client-retry","client-circuit-breaker","client-service-discovery"],"Advanced":["advanced-logging","advanced-structured-logging","advanced-custom-attributes","advanced-structured-logging-kafka","advanced-unit-testing","advanced-production-checklist","advanced-zipkin","advanced-zookeeper","advanced-saml","advanced-spring-webflux-integration","advanced-dropwizard-integration"]}')},AMUl:function(e){e.exports=JSON.parse('{"data":{"allMdx":{"nodes":[{"tableOfContents":{"items":[{"url":"#requestcontext-custom-attributes","title":"RequestContext custom attributes"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-custom-attributes"}},{"tableOfContents":{"items":[{"url":"#using-armeria-with-dropwizard","title":"Using Armeria with Dropwizard"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-dropwizard-integration"}},{"tableOfContents":{"items":[{"url":"#production-checklist","title":"Production checklist"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-production-checklist"}},{"tableOfContents":{"items":[{"url":"#logging-contextual-information","title":"Logging contextual information"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-logging"}},{"tableOfContents":{"items":[{"url":"#saml-single-sign-on","title":"SAML Single Sign-On"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-saml"}},{"tableOfContents":{"items":[{"url":"#using-armeria-with-spring-webflux","title":"Using Armeria with Spring WebFlux"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-spring-webflux-integration"}},{"tableOfContents":{"items":[{"url":"#structured-logging","title":"Structured logging"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-structured-logging"}},{"tableOfContents":{"items":[{"url":"#unit-testing-client-and-service","title":"Unit-testing Client and Service"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-unit-testing"}},{"tableOfContents":{"items":[{"url":"#zipkin-integration","title":"Zipkin integration"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-zipkin"}},{"tableOfContents":{"items":[{"url":"#service-discovery-with-zookeeper","title":"Service discovery with ZooKeeper"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-zookeeper"}},{"tableOfContents":{"items":[{"url":"#structured-logging-with-kafka","title":"Structured logging with Kafka"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"advanced-structured-logging-kafka"}},{"tableOfContents":{"items":[{"url":"#sending-custom-http-headers","title":"Sending custom HTTP headers"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-custom-http-headers"}},{"tableOfContents":{"items":[{"url":"#decorating-a-client","title":"Decorating a client"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-decorator"}},{"tableOfContents":{"items":[{"url":"#circuit-breaker","title":"Circuit breaker"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-circuit-breaker"}},{"tableOfContents":{"items":[{"url":"#calling-a-grpc-service","title":"Calling a gRPC service"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-grpc"}},{"tableOfContents":{"items":[{"url":"#retrofit-integration","title":"Retrofit integration"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-retrofit"}},{"tableOfContents":{"items":[{"url":"#calling-an-http-service","title":"Calling an HTTP service"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-http"}},{"tableOfContents":{"items":[{"url":"#automatic-retry","title":"Automatic retry"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-retry"}},{"tableOfContents":{"items":[{"url":"#client-side-load-balancing-and-service-discovery","title":"Client-side load balancing and service discovery"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-service-discovery"}},{"tableOfContents":{"items":[{"url":"#calling-a-thrift-service","title":"Calling a Thrift service"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-thrift"}},{"tableOfContents":{"items":[{"url":"#overriding-client-timeouts","title":"Overriding client timeouts"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"client-timeouts"}},{"tableOfContents":{"items":[{"url":"#writing-an-access-log","title":"Writing an access log"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-access-log"}},{"tableOfContents":{"items":[{"url":"#user-manual","title":"User manual"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"index"}},{"tableOfContents":{"items":[{"url":"#annotated-services","title":"Annotated services"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-annotated-service"}},{"tableOfContents":{"items":[{"url":"#server-basics","title":"Server basics"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-basics"}},{"tableOfContents":{"items":[{"url":"#configuring-cors","title":"Configuring CORS"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-cors"}},{"tableOfContents":{"items":[{"url":"#decorating-a-service","title":"Decorating a service"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-decorator"}},{"tableOfContents":{"items":[{"url":"#browsing-and-invoking-services-with-docservice","title":"Browsing and invoking services with DocService"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-docservice"}},{"tableOfContents":{"items":[{"url":"#running-a-grpc-service","title":"Running a gRPC service"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-grpc"}},{"tableOfContents":{"items":[{"url":"#serving-static-files","title":"Serving static files"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-http-file"}},{"tableOfContents":{"items":[{"url":"#embedding-a-servlet-container","title":"Embedding a servlet container"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-servlet"}},{"tableOfContents":{"items":[{"url":"#serving-server-sent-events","title":"Serving Server-Sent Events"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-sse"}},{"tableOfContents":{"items":[{"url":"#running-a-thrift-service","title":"Running a Thrift service"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"server-thrift"}},{"tableOfContents":{"items":[{"url":"#setting-up-a-project","title":"Setting up a project"}]},"parent":{"__typename":"File","sourceInstanceName":"docs","name":"setup"}}]}}}')},qLoO:function(e,t,a){"use strict";a.r(t),a.d(t,"pageTitle",(function(){return s})),a.d(t,"_frontmatter",(function(){return c})),a.d(t,"default",(function(){return b}));a("8x/H"),a("UsjJ"),a("tKM+"),a("q1tI");var n=a("7ljp"),r=a("xCMr");var s="Writing an access log",c={},o={pageTitle:s,_frontmatter:c},i=r.a;function b(e){var t=e.components,a=function(e,t){if(null==e)return{};var a,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)a=s[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,["components"]);return Object(n.b)(i,Object.assign({},o,a,{components:t,mdxType:"MDXLayout"}),Object(n.b)("h1",{id:"writing-an-access-log",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h1"},{href:"#writing-an-access-log","aria-label":"writing an access log permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Writing an access log"),Object(n.b)("h6",{className:"inlinePageToc",role:"navigation"},"Table of contents"),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object.assign({parentName:"p"},{href:"#configuring-logging-framework"}),"Configuring logging framework")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"#logback"}),"logback")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"#log4j2"}),"log4j2")))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object.assign({parentName:"p"},{href:"#customizing-a-log-format"}),"Customizing a log format")),Object(n.b)("ul",{parentName:"li"},Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"#retrieving-values-from-requestlog"}),"Retrieving values from RequestLog")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("a",Object.assign({parentName:"li"},{href:"#customizing-timestamp-format"}),"Customizing timestamp format")))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object.assign({parentName:"p"},{href:"#customizing-an-access-log-writer"}),"Customizing an access log writer"))),Object(n.b)("li",{parentName:"ul"},Object(n.b)("p",{parentName:"li"},Object(n.b)("a",Object.assign({parentName:"p"},{href:"#customizing-an-access-logger"}),"Customizing an access logger")))),Object(n.b)("h2",{id:"configuring-logging-framework",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h2"},{href:"#configuring-logging-framework","aria-label":"configuring logging framework permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Configuring logging framework"),Object(n.b)("p",null,"To write an access log, you need to configure a logging framework first. The following configurations are\nsimple examples of ",Object(n.b)("inlineCode",{parentName:"p"},"logback.xml")," and ",Object(n.b)("inlineCode",{parentName:"p"},"log4j2.xml")," respectively."),Object(n.b)("h3",{id:"logback",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h3"},{href:"#logback","aria-label":"logback permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"logback"),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-xml"}),'<?xml version="1.0" encoding="UTF-8"?>\n<configuration>\n  <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">\n    <encoder>\n      <pattern>%-4relative [%thread] %-5level %logger{35} - %msg%n</pattern>\n    </encoder>\n  </appender>\n\n  <appender name="ACCESS" class="ch.qos.logback.core.rolling.RollingFileAppender">\n    <file>access.log</file>\n    <rollingPolicy class="ch.qos.logback.core.rolling.SizeAndTimeBasedRollingPolicy">\n      \x3c!-- daily rollover --\x3e\n      <fileNamePattern>access.%d{yyyy-MM-dd}-%i.log</fileNamePattern>\n      \x3c!-- each file should be at most 1GB, keep 30 days worth of history, but at most 30GB --\x3e\n      <maxFileSize>1GB</maxFileSize>\n      <maxHistory>30</maxHistory>\n      <totalSizeCap>30GB</totalSizeCap>\n    </rollingPolicy>\n    <encoder>\n      <pattern>%msg%n</pattern>\n    </encoder>\n  </appender>\n\n  <logger name="com.linecorp.armeria.logging.access" level="INFO" additivity="false">\n    <appender-ref ref="ACCESS"/>\n  </logger>\n\n  <root level="DEBUG">\n    <appender-ref ref="CONSOLE"/>\n  </root>\n</configuration>\n')),Object(n.b)("h3",{id:"log4j2",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h3"},{href:"#log4j2","aria-label":"log4j2 permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"log4j2"),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-xml"}),'<?xml version="1.0" encoding="UTF-8"?>\n<Configuration status="WARN">\n  <Appenders>\n    <Console name="CONSOLE" target="SYSTEM_OUT">\n      <PatternLayout pattern="%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n"/>\n    </Console>\n    <RollingFile name="ACCESS" fileName="access.log"\n                 filePattern="access.%d{MM-dd-yyyy}-%i.log.gz">\n      <PatternLayout>\n        <Pattern>%m%n</Pattern>\n      </PatternLayout>\n\n      <Policies>\n        \x3c!-- daily rollover --\x3e\n        <TimeBasedTriggeringPolicy/>\n        \x3c!-- each file should be at most 1GB --\x3e\n        <SizeBasedTriggeringPolicy size="1GB"/>\n      </Policies>\n      \x3c!-- keep 30 archives --\x3e\n      <DefaultRolloverStrategy max="30"/>\n    </RollingFile>\n  </Appenders>\n\n  <Loggers>\n    <Logger name="com.linecorp.armeria.logging.access" level="INFO" additivity="false">\n      <AppenderRef ref="ACCESS"/>\n    </Logger>\n    <Root level="DEBUG">\n      <AppenderRef ref="CONSOLE"/>\n    </Root>\n  </Loggers>\n</Configuration>\n')),Object(n.b)("h2",{id:"customizing-a-log-format",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h2"},{href:"#customizing-a-log-format","aria-label":"customizing a log format permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Customizing a log format"),Object(n.b)("p",null,"Access logging is disabled by default. If you want to enable it, you need to specify an ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://AccessLogWriter:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/AccessLogWriter.html"}),"type://AccessLogWriter"),".\nYou may use one of the pre-defined log formats."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-java"}),'import com.linecorp.armeria.server.ServerBuilder;\nimport com.linecorp.armeria.server.logging.AccessLogWriter;\n\nServerBuilder sb = Server.builder();\n// Use NCSA common log format.\nsb.accessLogWriter(AccessLogWriter.common(), true);\n// Use NCSA combined log format.\nsb.accessLogWriter(AccessLogWriter.combined(), true);\n// Use your own log format.\nsb.accessLogFormat("...log format...");\n...\n')),Object(n.b)("p",null,"You can have different ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"typeplural://AccessLogWriter:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/logging/AccessLogWriter.html"}),"typeplural://AccessLogWriter")," for ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"typeplural://VirtualHost:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/VirtualHost.html"}),"typeplural://VirtualHost")," and ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"typeplural://Service:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/Service.html"}),"typeplural://Service"),"."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-java"}),'ServerBuilder sb = Server.builder();\nAccessLogWriter fallbackLogWriter = ...\nsb.accessLogWriter(fallbackLogWriter);\n\nsb.virtualHost("foo.com")\n  .accessLogWriter(AccessLogWriter.combined(), true)\n  .service((ctx, req) -> HttpResponse.of(OK)); // This service will log using the combined format.\n  ...\n\nsb.route()\n  .get("/commonAccessLog")\n  .accessLogWriter(AccessLogWriter.common(), true)\n  .build((ctx, req) -> HttpResponse.of(OK)); // This service will log using the common format.\n\n// This service will log using the fallbackLogWriter.\nsb.service("/fallbackLogWriter", (ctx, req) -> HttpResponse.of(OK));\n')),Object(n.b)("p",null,"Pre-defined log formats are as follows."),Object(n.b)("p",null,"Tokens for the log format are listed in the following table."),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("div",{style:{width:"12rem"}},"Tokens")),Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"th"},"Condition support")),Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"th"},"Description")))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%A"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"No")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the local IP address"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%a"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"No")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the IP address of the client who initiated a\nrequest. Use ",Object(n.b)("inlineCode",{parentName:"p"},"%{c}a")," format string to get the\nremote IP address where the channel is connected\nto, which may yield a different value when there\nis an intermediary proxy server.\nThis value relies on the ",Object(n.b)("inlineCode",{parentName:"p"},"clientAddress()")," and\n",Object(n.b)("inlineCode",{parentName:"p"},"remoteAddress()")," methods of\n",Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://ServiceRequestContext:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServiceRequestContext.html"}),"type://ServiceRequestContext"),", please refer to\n","[Getting an IP address of a client who initiated arequest]","\nabout how to configure the\n",Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://ServerBuilder:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/ServerBuilder.html"}),"type://ServerBuilder")," to get the client address\nyou interest."))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%h"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"No")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the remote hostname or IP address if DNS\nhostname lookup is not available"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%I"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"No")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the request ID. Use ",Object(n.b)("inlineCode",{parentName:"p"},"%{short}I")," format string to\nget the short form."))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%l"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"No")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the remote logname of the user\n(not supported yet, always write ",Object(n.b)("inlineCode",{parentName:"p"},"-"),")"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%u"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"No")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the name of the authenticated remote user\n(not supported yet, always write ",Object(n.b)("inlineCode",{parentName:"p"},"-"),")"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%t"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"No")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the date, time and time zone that the request\nwas received, by default in ",Object(n.b)("inlineCode",{parentName:"p"},"strftime")," format\n%d/%b/%Y:%H:%M:%S %z.\n(for example, ",Object(n.b)("inlineCode",{parentName:"p"},"10/Oct/2000:13:55:36 -0700"),")\nRefer to\n","[Customizing timestamp format][#customizing-timestamp-format]","\nfor more information."))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%r"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Yes")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the request line from the client\n(for example, ",Object(n.b)("inlineCode",{parentName:"p"},"GET /path h2"),")"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%s"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"No")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the HTTP status code returned to the client"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%b"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Yes")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the size of the object returned to the client,\nmeasured in bytes"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%{HEADER_NAME}i"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Yes")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the value of the specified HTTP request header\nname"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%{HEADER_NAME}o"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Yes")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the value of the specified HTTP response header\nname"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%{ATTRIBUTE_NAME}j"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Yes")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the value of the specified attribute name"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%{REQUEST_LOG_NAME}L"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Yes")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the value of the specified variable of the\n",Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"}),"type://RequestLog"),". Refer to\n",Object(n.b)("a",Object.assign({parentName:"p"},{href:"#retrieving-values-from-requestlog"}),"Retrieving values from RequestLog"),"\nfor more information."))))),Object(n.b)("p",null,"Some tokens can have a condition of the response status code and the log message can be omitted with\nthe condition."),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("div",{style:{width:"25rem"}},"Example of a condition")),Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"th"},"Description")))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%200b"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Write the size of the object returned to the\nclient only if the response code is ",Object(n.b)("inlineCode",{parentName:"p"},"200"),"."))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%200,304{User-Agent}i"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Write ",Object(n.b)("inlineCode",{parentName:"p"},"User-Agent")," header value only if the\nresponse code is ",Object(n.b)("inlineCode",{parentName:"p"},"200")," or ",Object(n.b)("inlineCode",{parentName:"p"},"304"),"."))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"%!200,304{com.example.armeria.Attribute#KEY}j"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Write the value of the specified attribute\nonly if the response code is neither ",Object(n.b)("inlineCode",{parentName:"p"},"200"),"\nnor ",Object(n.b)("inlineCode",{parentName:"p"},"304"),"."))))),Object(n.b)("h3",{id:"retrieving-values-from-requestlog",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h3"},{href:"#retrieving-values-from-requestlog","aria-label":"retrieving values from requestlog permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Retrieving values from ",Object(n.b)("inlineCode",{parentName:"h3"},"RequestLog")),Object(n.b)("p",null,Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"}),"type://RequestLog")," holds information about the request, so a user may want to write these values to his or\nher access log file. To write them in a simple way, ",Object(n.b)("inlineCode",{parentName:"p"},"%{variable}L")," token is provided with the following\nsupported variable:"),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("div",{style:{width:"13rem"}},"Name")),Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"th"},"Description")))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"method"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the HTTP method value of the request"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"path"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the absolute path part of the HTTP request URI"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"query"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the query part of the HTTP request URI"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"requestStartTimeMillis"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the time when the processing of the request started,\nin milliseconds since the epoch"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"requestDurationMillis"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the duration that was taken to consume or produce the request\ncompletely, in milliseconds"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"requestDurationNanos"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the duration that was taken to consume or produce the request\ncompletely, in nanoseconds"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"requestLength"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the length of the request content"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"requestCause"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the cause of request processing failure. The class name of the\ncause and the detail message of it will be contained if exists."))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"requestContentPreview"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the preview of the request content"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"responseStartTimeMillis"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the time when the processing of the response started,\nin milliseconds since the epoch"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"responseDurationMillis"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the duration that was taken to consume or produce the response\ncompletely, in milliseconds"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"responseDurationNanos"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the duration that was taken to consume or produce the response\ncompletely, in nanoseconds"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"responseLength"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the length of the response content"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"responseCause"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the cause of response processing failure. The class name of the\ncause and the detail message of it will be contained if exists."))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"responseContentPreview"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the preview of the response content"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"totalDurationMillis"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the amount of time taken since the request processing started and\nuntil the response processing ended, in milliseconds"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"totalDurationNanos"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the amount of time taken since the request processing started and\nuntil the response processing ended, in nanoseconds"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"sessionProtocol"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the session protocol of the request.\ne.g. ",Object(n.b)("inlineCode",{parentName:"p"},"h1"),", ",Object(n.b)("inlineCode",{parentName:"p"},"h2"),", ",Object(n.b)("inlineCode",{parentName:"p"},"h1c")," or ",Object(n.b)("inlineCode",{parentName:"p"},"h2c")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"serializationFormat"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the serialization format of the request.\ne.g. ",Object(n.b)("inlineCode",{parentName:"p"},"tbinary"),", ",Object(n.b)("inlineCode",{parentName:"p"},"ttext"),", ",Object(n.b)("inlineCode",{parentName:"p"},"tcompact"),", ",Object(n.b)("inlineCode",{parentName:"p"},"tjson")," or ",Object(n.b)("inlineCode",{parentName:"p"},"none")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"scheme"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the scheme value printed as ",Object(n.b)("inlineCode",{parentName:"p"},"serializationFormat+sessionProtocol")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"host"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the host name of the request"))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"status"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the status code and its reason phrase of the response.\ne.g. ",Object(n.b)("inlineCode",{parentName:"p"},"200 OK")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"statusCode"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"the status code of the response. e.g. ",Object(n.b)("inlineCode",{parentName:"p"},"200")))))),Object(n.b)("h3",{id:"customizing-timestamp-format",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h3"},{href:"#customizing-timestamp-format","aria-label":"customizing timestamp format permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Customizing timestamp format"),Object(n.b)("p",null,"You can specify a new date/time format for the ",Object(n.b)("inlineCode",{parentName:"p"},"%t")," token with\n",Object(n.b)("a",Object.assign({parentName:"p"},{href:"https://docs.oracle.com/javase/10/docs/api/java/time/format/DateTimeFormatter.html"}),"DateTimeFormatter"),".\nYou can use one of the following formatters which is provided by JDK as a variable of the ",Object(n.b)("inlineCode",{parentName:"p"},"%t")," token,\ne.g. ",Object(n.b)("inlineCode",{parentName:"p"},"%{BASIC_ISO_DATE}t"),". If you want to use your own pattern, you can specify it as the variable,\ne.g. ",Object(n.b)("inlineCode",{parentName:"p"},"%{yyyy MM dd}t"),"."),Object(n.b)("table",null,Object(n.b)("thead",{parentName:"table"},Object(n.b)("tr",{parentName:"thead"},Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"th"},"Formatter")),Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"th"},"Description")),Object(n.b)("th",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"th"},"Example")))),Object(n.b)("tbody",{parentName:"table"},Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"BASIC_ISO_DATE"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Basic ISO date")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"20111203")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_LOCAL_DATE"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"ISO Local Date")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_OFFSET_DATE"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"ISO Date with offset")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03+01:00")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_DATE"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"ISO Date with or without offset")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03+01:00"),"; ",Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_LOCAL_TIME"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Time without offset")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"10:15:30")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_OFFSET_TIME"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Time with offset")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"10:15:30+01:00")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_TIME"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Time with or without offset")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"10:15:30+01:00"),"; ",Object(n.b)("inlineCode",{parentName:"p"},"10:15:30")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_LOCAL_DATE_TIME"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"ISO Local Date and Time")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_OFFSET_DATE_TIME"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Date Time with Offset")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30+01:00")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_ZONED_DATE_TIME"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Zoned Date Time")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30+01:00[Europe/Paris]")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_DATE_TIME"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Date and time with ZoneId")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30+01:00[Europe/Paris]")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_ORDINAL_DATE"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Year and day of year")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2012-337")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_WEEK_DATE"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Year and Week")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2012-W48-6")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"ISO_INSTANT"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"Date and Time of an Instant")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"2011-12-03T10:15:30Z")))),Object(n.b)("tr",{parentName:"tbody"},Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"RFC_1123_DATE_TIME"))),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},"RFC 1123 / RFC 822")),Object(n.b)("td",Object.assign({parentName:"tr"},{colspan:1,rowspan:1}),Object(n.b)("p",{parentName:"td"},Object(n.b)("inlineCode",{parentName:"p"},"Tue, 3 Jun 2008 11:05:30 GMT")))))),Object(n.b)("h2",{id:"customizing-an-access-log-writer",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h2"},{href:"#customizing-an-access-log-writer","aria-label":"customizing an access log writer permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Customizing an access log writer"),Object(n.b)("p",null,"You can specify your own log writer which implements a ",Object(n.b)("inlineCode",{parentName:"p"},"Consumer")," of ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://RequestLog:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/common/logging/RequestLog.html"}),"type://RequestLog"),"."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-java"}),"ServerBuilder sb = Server.builder();\nsb.accessLogWriter(requestLog -> {\n    // Write your access log with the given RequestLog instance.\n    ...\n}, true);\n")),Object(n.b)("h2",{id:"customizing-an-access-logger",style:{position:"relative"}},Object(n.b)("a",Object.assign({parentName:"h2"},{href:"#customizing-an-access-logger","aria-label":"customizing an access logger permalink",className:"anchor before"}),Object(n.b)("svg",Object.assign({parentName:"a"},{"aria-hidden":"true",focusable:"false",height:"16",version:"1.1",viewBox:"0 0 16 16",width:"16"}),Object(n.b)("path",Object.assign({parentName:"svg"},{fillRule:"evenodd",d:"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"})))),"Customizing an access logger"),Object(n.b)("p",null,"Armeria uses an SLF4J logger whose name is based on a reversed domain name of each virtual host by\ndefault, e.g."),Object(n.b)("ul",null,Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"com.linecorp.armeria.logging.access.com.example")," for ",Object(n.b)("inlineCode",{parentName:"li"},"*.example.com")),Object(n.b)("li",{parentName:"ul"},Object(n.b)("inlineCode",{parentName:"li"},"com.linecorp.armeria.logging.access.com.linecorp")," for ",Object(n.b)("inlineCode",{parentName:"li"},"*.linecorp.com"))),Object(n.b)("p",null,"Alternatively, you can specify your own mapper or logger for a ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://VirtualHost:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/VirtualHost.html"}),"type://VirtualHost"),", e.g."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-java"}),'ServerBuilder sb = Server.builder();\n\n// Using the specific logger name.\nsb.accessLogger("com.example.my.access.logs");\n...\n\n// Using your own logger.\nLogger logger = LoggerFactory.getLogger("com.example2.my.access.logs");\nsb.accessLogger(Logger);\n...\n\n// Using the mapper which sets an access logger with the given VirtualHost instance.\nsb.accessLogger(virtualHost -> {\n    // Return the logger.\n    // Do not return null. Otherwise, it will raise an IllegalStateException.\n    return LoggerFactory.getLogger("com.example.my.access.logs." + virtualHost.defaultHostname());\n});\n...\n')),Object(n.b)("p",null,"You can also specify your own logger for the specific ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://VirtualHost:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/VirtualHost.html"}),"type://VirtualHost"),". In this case, the mapper or logger\nyou set for a specific ",Object(n.b)("a",Object.assign({parentName:"p"},{href:"type://VirtualHost:https://javadoc.io/doc/com.linecorp.armeria/armeria-javadoc/latest/com/linecorp/armeria/server/VirtualHost.html"}),"type://VirtualHost")," will override the access logger set via\n",Object(n.b)("inlineCode",{parentName:"p"},"ServerBuilder.accessLogger()"),"."),Object(n.b)("pre",null,Object(n.b)("code",Object.assign({parentName:"pre"},{className:"language-java"}),'// Using the specific logger name.\nsb.virtualHost("*.example.com")\n  .accessLogger("com.example.my.access.logs")\n  .and()\n...\n\n// Using your own logger.\nLogger logger = LoggerFactory.getLogger("com.example2.my.access.logs");\nsb.virtualHost("*.example2.com")\n  .accessLogger(Logger)\n  .and()\n...\n\n// Using the mapper which sets an access logger with the given VirtualHost instance.\nsb.virtualHost("*.example3.com")\n  .accessLogger(virtualHost -> {\n    // Return the logger.\n    // Do not return null. Otherwise, it will raise an IllegalStateException.\n    return LoggerFactory.getLogger("com.example.my.access.logs." + virtualHost.defaultHostname());\n  })\n...\n')))}b.isMDXComponent=!0},xCMr:function(e,t,a){"use strict";a("UsjJ");var n=a("AMUl"),r=a("q1tI"),s=a.n(r),c=a("/94A"),o=a("+ejy");t.a=function(e){var t=n.data.allMdx.nodes;return s.a.createElement(o.a,Object.assign({},e,{candidateMdxNodes:t,index:c,prefix:"docs",pageTitleSuffix:"Armeria documentation"}))}}}]);
//# sourceMappingURL=component---src-pages-docs-server-access-log-mdx-66d9731f472e31fac161.js.map